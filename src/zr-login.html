<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/iron-iconset-svg/iron-iconset-svg.html">

<link rel="import" href="zr-styles.html">

<dom-module id="zr-login">
  <template>
    <style include="form-styles button-styles social-styles show-styles">
      :host {
        display: block;
        height: 100vh;
        background: #fefefe;
      }

      .container--vertical {
        @apply --layout-vertical;
        @apply --layout-center-center;
        max-width: 460px;
        margin: 0 auto;
        padding: 40px;
      }

      .container--horizontal {
        @apply --layout-horizontal;
        @apply --layout-center-justified;
        @apply --layout-fit;
        max-width: 100%;
        margin: 0 auto;
      }

      img {
        width: 192px;
        height: 192px;
      }

      h2 {
        font-size: 22px;
        margin: 20px 0;
        font-weight: 600;
      }

      a {
        text-decoration: underline;
        cursor: pointer;
        font-size: 12px;
      }

      .section {
        @apply --layout-vertical;
        @apply --layout-center-center;
        margin: 0 24px 16px;
      }

      .forgot {
        margin-left: auto;
        margin-top: -10px;
      }

      .section__or {
        @apply --layout-horizontal;
        @apply --layout-center-center;
        width: 100%;
        color: #888;
        margin-bottom: 16px;
      }

      .separator-h {
        @apply --layout-flex;
        border: 0;
        height: 1px;
        background: #888;
      }

      .separator-v {
        display: inline;
        border: 0;
        width: 1px;
        background: #888;
      }

      .separator--left {
        background: -webkit-gradient(linear, left top, right top, color-stop(0%,hsla(0,0%,0%,0)), color-stop(90%,#888), color-stop(100%,hsla(0,0%,0%,0)));
        background: -webkit-linear-gradient(left, hsla(0,0%,0%,0) 0%, #888 90%, hsla(0,0%,0%,0) 100%);
        background: -moz-linear-gradient(left, hsla(0,0%,0%,0) 0%, #888 90%, hsla(0,0%,0%,0) 100%);
        background: -ms-linear-gradient(left, hsla(0,0%,0%,0) 0%, #888 90%, hsla(0,0%,0%,0) 100%);
        background: -o-linear-gradient(left, hsla(0,0%,0%,0) 0%, #888 90%, hsla(0,0%,0%,0) 100%);
        background: linear-gradient(left, hsla(0,0%,0%,0) 0%, #888 90%, hsla(0,0%,0%,0) 100%);
      }

      .separator--right {
        background: -webkit-gradient(linear, right top, left top, color-stop(0%,hsla(0,0%,0%,0)), color-stop(90%,#888), color-stop(100%,hsla(0,0%,0%,0)));
        background: -webkit-linear-gradient(right, hsla(0,0%,0%,0) 0%, #888 90%, hsla(0,0%,0%,0) 100%);
        background: -moz-linear-gradient(right, hsla(0,0%,0%,0) 0%, #888 90%, hsla(0,0%,0%,0) 100%);
        background: -ms-linear-gradient(right, hsla(0,0%,0%,0) 0%, #888 90%, hsla(0,0%,0%,0) 100%);
        background: -o-linear-gradient(right, hsla(0,0%,0%,0) 0%, #888 90%, hsla(0,0%,0%,0) 100%);
        background: linear-gradient(right, hsla(0,0%,0%,0) 0%, #888 90%, hsla(0,0%,0%,0) 100%);
      }

      .separator--top {
        background: -webkit-gradient(linear, top, bottom, color-stop(30%,hsla(0,0%,0%,0)), color-stop(50%,#888), color-stop(70%,hsla(0,0%,0%,0)));
        background: -webkit-linear-gradient(top, hsla(0,0%,0%,0) 30%, #888 45%, #888 50%,hsla(0,0%,0%,0) 70%);
        background: -moz-linear-gradient(top, hsla(0,0%,0%,0) 30%, #888 40%, hsla(0,0%,0%,0) 70%);
        background: -ms-linear-gradient(top, hsla(0,0%,0%,0) 30%, #888 40%, hsla(0,0%,0%,0) 70%);
        background: -o-linear-gradient(top, hsla(0,0%,0%,0) 30%, #888 40%, hsla(0,0%,0%,0) 70%);
        background: linear-gradient(top, hsla(0,0%,0%,0) 30%, #888 40%, hsla(0,0%,0%,0) 70%);
      }

      .button--text {
        --background-button: var(--primary-color);
        --background-button-hover: var(--zr-secondary-color);
        --background-button-focus: var(--zr-secondary-color);
        text-transform: none;
      }

      .form__input {
        width: 268px;
      }
    </style>

    <div class$="[[_computeClassContainer(mediumScreen)]]">

      <div class="section">
        <img src="../images/manifest/zr.png"></img>
      </div>

      <div class="section separator-v separator--top" hidden$="[[mediumScreen]]"></div>

      <div class="section">
        <paper-input
          auto-validate
          no-label-float
          class="form__input"
          name="email"
          value="{{_account.email::input}}"
          placeholder="email"></paper-input>
        <paper-input
          no-label-float
          class="form__input"
          name="password"
          value="{{_account.password::input}}"
          placeholder="password"
          type="password"></paper-input>
        <div class="forgot">
          <a><span>Forgot your password?</span></a>
        </div>
        <div>
          <button class="btn btn-social button--text" on-click="_loginPasswordTapped">
            Sign in with email and password
          </button>
        </div>
      </div>

      <div class="section separator-v separator--top" hidden$="[[mediumScreen]]"></div>

      <div class="section">

        <div class="section__or" hidden$="[[!mediumScreen]]">
          <div class="separator-h separator--left"></div>
          <span>or</span>
          <div class="separator-h separator--right"></div>
        </div>

        <button class="btn btn-social btn-google" on-click="_loginGoogleTapped">
          <span><iron-icon icon="zr-social-icons:google"></iron-icon></span>Sign in with Google
        </button>  
        <button class="btn btn-social btn-facebook" on-click="_loginFacebookTapped">
          <span><iron-icon icon="zr-social-icons:facebook"></iron-icon></span>Sign in with Facebook
        </button>  
        <button class="btn btn-social btn-twitter" on-click="_loginTwitterTapped">
          <span><iron-icon icon="zr-social-icons:twitter"></iron-icon></span>Sign in with Twitter
        </button>
        <button class="btn btn-social btn-github" on-click="_loginGithubTapped">
          <span><iron-icon icon="zr-social-icons:github"></iron-icon></span>Sign in with Github
        </button>

      </div>

    </div>

  </template>

  <script>

    class ZRLogin extends Polymer.Element {

      static get is() { return 'zr-login'; }

      static get properties() {
        return {

          _account: {
            type: Object,
            value: {
              'provider': '',
              'email': '',
              'password': ''
            }
          },

          appName: String,

          smallScreen: Boolean,

          mediumScreen: Boolean
  
        }
      }

      _loginPasswordTapped() {
        this._account.provider = 'password';
        document.dispatchEvent(new CustomEvent('login-tapped', {detail: {account: this._account}}));
        this.shadowRoot.querySelector('.form__input').focus();
      }

      _loginGoogleTapped() {
        this._account.provider = 'google';
        document.dispatchEvent(new CustomEvent('login-tapped', {detail: {account: this._account}}));
      }

      _loginFacebookTapped() {
        this._account.provider = 'facebook';
        document.dispatchEvent(new CustomEvent('login-tapped', {detail: {account: this._account}}));
      }

      _loginTwitterTapped() {
        this._account.provider = 'twitter';
        document.dispatchEvent(new CustomEvent('login-tapped', {detail: {account: this._account}}));
      }

      _loginGithubTapped() {
        this._account.provider = 'github';
        document.dispatchEvent(new CustomEvent('login-tapped', {detail: {account: this._account}}));
      }

      _computeClassContainer(mediumScreen) {
        if (mediumScreen) {
          return 'container--vertical';
        }
        return 'container--horizontal';
      }

    }

    window.customElements.define(ZRLogin.is, ZRLogin);

  </script>
</dom-module>
