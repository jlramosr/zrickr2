<script>

  window.ZRCommon = {

    updateWindowLocation(location) {
      window.history.replaceState(null, null, location);
      window.dispatchEvent(new CustomEvent('location-changed'));
    },

    showMessage(message, type) {
      if (!message) {
        if (type == 'error' || type == 'warning') { message = 'An unknown error has occurred.'; }
        else { message = 'Everything turned out well.'; }
      }
      document.dispatchEvent(new CustomEvent('show-message', {
        detail: {message: message || '', type: type || ''}
      }));
    },

    capitalize(string) {
      return string.charAt(0).toUpperCase() + string.slice(1);
    },

    cloneObject(object) {
      return JSON.parse(JSON.stringify(object));
    },

    // Transform an object of objects in an array of objects.
    objectsToArray(_object) {
      if (!_object) return null;
      return Object.keys(_object).map(function(key) {
        var object = _object[key];
        object.id = key;
        return object;   
      });
    }

  };

</script>

