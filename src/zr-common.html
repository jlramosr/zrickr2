<script>

  window.ZRCommon = {

    updateWindowLocation(location) {
      window.history.replaceState(null, null, location);
      window.dispatchEvent(new CustomEvent('location-changed'));
    },

    showMessage(message, type) {
      if (!message) {
        if (type == 'error' || type == 'warning') { message = 'An unknown error has occurred.'; }
        else { message = 'Everything turned out well.'; }
      }
      document.dispatchEvent(new CustomEvent('show-message', {
        detail: {message: message || '', type: type || ''}
      }));
    },

    capitalize(string) {
      return string.charAt(0).toUpperCase() + string.slice(1);
    },

    cloneObject(object) {
      return JSON.parse(JSON.stringify(object));
    },

    //https://stackoverflow.com/questions/12043187/how-to-check-if-hex-color-is-too-black
    isDarkColor(c) {
      var c = c.substring(1);      // strip #
      var rgb = parseInt(c, 16);   // convert rrggbb to decimal
      var r = (rgb >> 16) & 0xff;  // extract red
      var g = (rgb >>  8) & 0xff;  // extract green
      var b = (rgb >>  0) & 0xff;  // extract blue

      var luma = 0.2126 * r + 0.7152 * g + 0.0722 * b; // per ITU-R BT.709

      return luma < 40;
    },

    // Transform an object of objects in an array of objects.
    objectsToArray(_object) {
      if (!_object) return null;
      return Object.keys(_object).map(function(key) {
        var object = _object[key];
        object.id = key;
        return object;   
      });
    }

  };

</script>

